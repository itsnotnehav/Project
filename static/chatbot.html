<html>
    <head>
        <title>Chat</title>
    </head>
    <body>
        <center>
        <p id="chatLog">CHAT WITH THE CHATBOT<br></p>
        <input type = "text" id = "ques" name = "ques" onkeydown = "if (event.keyCode == 13) {chat()}"> <br> <br>
        <button type="button" onclick = "logout()">Log Out</button>
        </center>
        <script> 

            function logout() {
            window.location.href = "index.html"
            }

            async function chat() {
                const ques = document.getElementById("ques").value;
                document.getElementById("ques").value = ""
                document.getElementById("chatLog").innerHTML += ques + "<br>"  
                const data = {ques};
                const options = {
                    method : 'POST',
                    headers : {
                        'Content-Type' : 'application/json'
                    },
                body : JSON.stringify(data)
            };
                const respo = await fetch('/api', options)
                const json = await respo.json()
                if (json.status === 'okay') {
                document.getElementById("chatLog").innerHTML += json.ans + "<br>"
            } else {
                document.getElementById("chatLog").innerHTML += json.error + "<br>"
            }
        }
        </script> 
    </body>
</html>












